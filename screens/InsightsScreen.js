import React, { useState, useEffect, useRef } from 'react';
import {
  StyleSheet,
  View,
  Text,
  ScrollView,
  TouchableOpacity,
  Dimensions,
  Animated,
  RefreshControl,
  Alert,
  ActivityIndicator
} from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { useSafeAreaInsets } from 'react-native-safe-area-context';
import { LineChart, PieChart, BarChart } from 'react-native-chart-kit';
import { APP_CONFIG, EMOTION_CONFIG } from '../config/app';
import { database, auth } from '../lib/supabase';
import { dateUtils, emotionUtils } from '../utils';

const { width: screenWidth } = Dimensions.get('window');

// Ïï†ÎãàÎ©îÏù¥ÏÖò Ïπ¥Îìú Ïª¥Ìè¨ÎÑåÌä∏
const AnimatedCard = ({ children, style, delay = 0 }) => {
  const fadeAnim = useRef(new Animated.Value(0)).current;
  const scaleAnim = useRef(new Animated.Value(0.95)).current;
  
  React.useEffect(() => {
    Animated.parallel([
      Animated.timing(fadeAnim, {
        toValue: 1,
        duration: 600,
        delay,
        useNativeDriver: true,
      }),
      Animated.spring(scaleAnim, {
        toValue: 1,
        tension: 50,
        friction: 7,
        delay,
        useNativeDriver: true,
      }),
    ]).start();
  }, []);

  return (
    <Animated.View 
      style={[
        { opacity: fadeAnim, transform: [{ scale: scaleAnim }] },
        style
      ]}
    >
      {children}
    </Animated.View>
  );
};

// Í∏ÄÎûòÏä§ Ïπ¥Îìú Ïª¥Ìè¨ÎÑåÌä∏
const GlassCard = ({ children, style, ...props }) => (
  <View style={[styles.glassCard, style]} {...props}>
    {children}
  </View>
);

// ÌÜµÍ≥Ñ ÏïÑÏù¥ÌÖú Ïª¥Ìè¨ÎÑåÌä∏
const StatItem = ({ icon, label, value, color, delay = 0 }) => {
  const scaleAnim = useRef(new Animated.Value(0)).current;

  useEffect(() => {
    Animated.spring(scaleAnim, {
      toValue: 1,
      delay,
      tension: 50,
      friction: 7,
      useNativeDriver: true,
    }).start();
  }, []);

  return (
    <Animated.View style={[styles.statItem, { transform: [{ scale: scaleAnim }] }]}>
      <LinearGradient
        colors={[color + '20', color + '10']}
        style={styles.statIconContainer}
      >
        <Text style={styles.statIcon}>{icon}</Text>
      </LinearGradient>
      <Text style={styles.statValue}>{value}</Text>
      <Text style={styles.statLabel}>{label}</Text>
    </Animated.View>
  );
};

// Í∞êÏ†ï Ìä∏Î†åÎìú ÏïÑÏù¥ÌÖú
const EmotionTrendItem = ({ emotion, count, percentage, isTop = false }) => {
  const emotionConfig = EMOTION_CONFIG.categories.find(cat => 
    cat.name === emotion || cat.id === emotion
  ) || EMOTION_CONFIG.categories[6];

  return (
    <View style={[styles.trendItem, isTop && styles.topTrendItem]}>
      <View style={styles.trendLeft}>
        <Text style={styles.trendEmoji}>{emotionConfig.emoji}</Text>
        <View style={styles.trendInfo}>
          <Text style={[styles.trendEmotion, { color: emotionConfig.color }]}>
            {emotionConfig.name}
          </Text>
          <Text style={styles.trendCount}>{count}Ìöå Í∏∞Î°ù</Text>
        </View>
      </View>
      <View style={styles.trendRight}>
        <Text style={[styles.trendPercentage, { color: emotionConfig.color }]}>
          {percentage}%
        </Text>
        <View style={styles.trendBar}>
          <View 
            style={[
              styles.trendBarFill, 
              { 
                width: `${percentage}%`,
                backgroundColor: emotionConfig.color 
              }
            ]} 
          />
        </View>
      </View>
      {isTop && (
        <View style={styles.topBadge}>
          <Text style={styles.topBadgeText}>TOP</Text>
        </View>
      )}
    </View>
  );
};

const InsightsScreen = ({ navigation }) => {
  const insets = useSafeAreaInsets();
  const [loading, setLoading] = useState(true);
  const [refreshing, setRefreshing] = useState(false);
  const [currentUser, setCurrentUser] = useState(null);
  const [emotionData, setEmotionData] = useState([]);
  const [chartData, setChartData] = useState(null);
  const [emotionStats, setEmotionStats] = useState(null);
  const [selectedPeriod, setSelectedPeriod] = useState('week');

  // Ï∞®Ìä∏ ÏÑ§Ï†ï
  const chartConfig = {
    backgroundColor: 'transparent',
    backgroundGradientFrom: 'rgba(255, 255, 255, 0)',
    backgroundGradientTo: 'rgba(255, 255, 255, 0)',
    color: (opacity = 1) => `rgba(99, 102, 241, ${opacity})`,
    strokeWidth: 3,
    barPercentage: 0.7,
    fillShadowGradient: APP_CONFIG.colors.primary,
    fillShadowGradientOpacity: 0.3,
    decimalPlaces: 0,
    style: {
      borderRadius: APP_CONFIG.borderRadius.lg,
    },
    propsForBackgroundLines: {
      strokeDasharray: '',
      stroke: APP_CONFIG.colors.border,
      strokeWidth: 1,
    },
    propsForLabels: {
      fontSize: 12,
      fontWeight: '500',
      fill: APP_CONFIG.colors.textLight,
    },
  };

  // Îç∞Ïù¥ÌÑ∞ Î°úÎìú Î∞è Ï∞®Ìä∏ ÏÉùÏÑ± Ìï®ÏàòÎì§ (Í∞ÑÏÜåÌôî)
  const loadData = async () => {
    try {
      const { user } = await auth.getCurrentUser();
      const userId = user?.id || 'anonymous';
      setCurrentUser(user || { id: 'anonymous', isAnonymous: true });

      const { data: emotions } = await database.getEmotions(userId, 50);
      
      if (emotions && emotions.length > 0) {
        setEmotionData(emotions);
        generateCharts(emotions);
        calculateStats(emotions);
      } else {
        generateSampleData();
      }
    } catch (error) {
      console.error('Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïò§Î•ò:', error);
      generateSampleData();
    } finally {
      setLoading(false);
      setRefreshing(false);
    }
  };

  const generateCharts = (emotions) => {
    // ÎùºÏù∏ Ï∞®Ìä∏ (Í∞êÏ†ï Í∞ïÎèÑ Ï∂îÏù¥)
    const lineData = {
      labels: ['Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†', 'Ïùº'],
      datasets: [{
        data: [3.2, 2.8, 4.1, 3.5, 3.9, 4.2, 3.7],
        strokeWidth: 3,
        color: (opacity = 1) => `rgba(99, 102, 241, ${opacity})`,
      }]
    };

    // ÌååÏù¥ Ï∞®Ìä∏ (Í∞êÏ†ï Î∂ÑÌè¨)
    const emotionCounts = {};
    emotions.forEach(emotion => {
      const name = emotion.primary_emotion || 'ÌèâÏò®';
      emotionCounts[name] = (emotionCounts[name] || 0) + 1;
    });

    const pieData = Object.keys(emotionCounts).map(emotion => {
      const config = EMOTION_CONFIG.categories.find(cat => 
        cat.name === emotion || cat.id === emotion
      ) || EMOTION_CONFIG.categories[6];

      return {
        name: config.name,
        population: emotionCounts[emotion],
        color: config.color,
        legendFontColor: APP_CONFIG.colors.textLight,
        legendFontSize: 12,
      };
    });

    // Î∞î Ï∞®Ìä∏ (ÏùºÎ≥Ñ Í∏∞Î°ù Ïàò)
    const barData = {
      labels: ['Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†', 'Ïùº'],
      datasets: [{ data: [2, 1, 3, 2, 1, 4, 2] }]
    };

    setChartData({ lineChart: lineData, pieChart: pieData, barChart: barData });
  };

  const calculateStats = (emotions) => {
    const stats = {
      totalRecords: emotions.length,
      avgIntensity: 3.6,
      positiveRatio: 65,
      consistencyScore: 78,
      weeklyGrowth: 12,
      emotionTrends: [
        { emotion: 'Í∏∞ÏÅ®', count: 8, percentage: 40 },
        { emotion: 'ÌèâÏò®', count: 6, percentage: 30 },
        { emotion: 'Ïä¨Ìîî', count: 4, percentage: 20 },
        { emotion: 'Î∂àÏïà', count: 2, percentage: 10 }
      ]
    };
    setEmotionStats(stats);
  };

  const generateSampleData = () => {
    const sampleStats = {
      totalRecords: 0,
      avgIntensity: 0,
      positiveRatio: 0,
      consistencyScore: 0,
      weeklyGrowth: 0,
      emotionTrends: []
    };
    setEmotionStats(sampleStats);
    setChartData(null);
  };

  const handleRefresh = () => {
    setRefreshing(true);
    loadData();
  };

  useEffect(() => {
    loadData();
  }, []);

  if (loading) {
    return (
      <View style={[styles.container, styles.loadingContainer]}>
        <LinearGradient
          colors={['rgba(99, 102, 241, 0.1)', 'transparent']}
          style={styles.headerGradient}
        />
        <ActivityIndicator size="large" color={APP_CONFIG.colors.primary} />
        <Text style={styles.loadingText}>Í∞êÏ†ï Îç∞Ïù¥ÌÑ∞Î•º Î∂ÑÏÑùÌïòÎäî Ï§ë...</Text>
      </View>
    );
  }

  return (
    <View style={[styles.container, { paddingTop: insets.top }]}>
      <LinearGradient
        colors={['rgba(99, 102, 241, 0.1)', 'transparent']}
        style={styles.headerGradient}
      />
      
      <ScrollView
        style={styles.scrollView}
        contentContainerStyle={styles.scrollContent}
        showsVerticalScrollIndicator={false}
        refreshControl={
          <RefreshControl
            refreshing={refreshing}
            onRefresh={handleRefresh}
            colors={[APP_CONFIG.colors.primary]}
            tintColor={APP_CONFIG.colors.primary}
          />
        }
      >
        {/* Ìó§Îçî */}
        <AnimatedCard style={styles.headerSection} delay={0}>
          <View style={styles.header}>
            <LinearGradient
              colors={APP_CONFIG.colors.gradients.cool}
              style={styles.headerIcon}
            >
              <Text style={styles.headerEmoji}>üìä</Text>
            </LinearGradient>
            <View style={styles.headerContent}>
              <Text style={styles.headerTitle}>Pal Insights</Text>
              <Text style={styles.headerSubtitle}>
                {emotionStats ? `${emotionStats.totalRecords}Í∞úÏùò Í∞êÏ†ï Í∏∞Î°ù Î∂ÑÏÑù` : 'Í∞êÏ†ï Ìå®ÌÑ¥ Î∂ÑÏÑù'}
              </Text>
            </View>
          </View>
        </AnimatedCard>

        {/* ÌÜµÍ≥Ñ ÏöîÏïΩ */}
        {emotionStats && emotionStats.totalRecords > 0 && (
          <AnimatedCard delay={200}>
            <GlassCard style={styles.statsCard}>
              <Text style={styles.cardTitle}>üìà ÌïµÏã¨ ÏßÄÌëú</Text>
              <View style={styles.statsGrid}>
                <StatItem
                  icon="üéØ"
                  label="Í∏∞Î°ù ÏùºÍ¥ÄÏÑ±"
                  value={`${emotionStats.consistencyScore}%`}
                  color={APP_CONFIG.colors.success}
                  delay={300}
                />
                <StatItem
                  icon="üòä"
                  label="Í∏çÏ†ï ÎπÑÏú®"
                  value={`${emotionStats.positiveRatio}%`}
                  color={APP_CONFIG.colors.secondary}
                  delay={400}
                />
                <StatItem
                  icon="üìä"
                  label="ÌèâÍ∑† Í∞ïÎèÑ"
                  value={`${emotionStats.avgIntensity}/5`}
                  color={APP_CONFIG.colors.primary}
                  delay={500}
                />
                <StatItem
                  icon="üìà"
                  label="Ï£ºÍ∞Ñ Î≥ÄÌôî"
                  value={`+${emotionStats.weeklyGrowth}%`}
                  color={APP_CONFIG.colors.success}
                  delay={600}
                />
              </View>
            </GlassCard>
          </AnimatedCard>
        )}

        {/* Í∞êÏ†ï Í∞ïÎèÑ Ï∂îÏù¥ Ï∞®Ìä∏ */}
        {chartData?.lineChart && (
          <AnimatedCard delay={300}>
            <GlassCard style={styles.chartCard}>
              <Text style={styles.cardTitle}>üìà Í∞êÏ†ï Í∞ïÎèÑ Ï∂îÏù¥</Text>
              <Text style={styles.cardSubtitle}>ÏµúÍ∑º 7Ïùº Í∞êÏ†ï Í∞ïÎèÑ Î≥ÄÌôî</Text>
              <View style={styles.chartContainer}>
                <LineChart
                  data={chartData.lineChart}
                  width={screenWidth - 80}
                  height={220}
                  chartConfig={chartConfig}
                  bezier
                  style={styles.chart}
                />
              </View>
            </GlassCard>
          </AnimatedCard>
        )}

        {/* Í∞êÏ†ï Î∂ÑÌè¨ Ï∞®Ìä∏ */}
        {chartData?.pieChart && chartData.pieChart.length > 0 && (
          <AnimatedCard delay={400}>
            <GlassCard style={styles.chartCard}>
              <Text style={styles.cardTitle}>üé≠ Í∞êÏ†ï Î∂ÑÌè¨</Text>
              <Text style={styles.cardSubtitle}>Í∞Å Í∞êÏ†ïÏùò ÎπÑÏú®</Text>
              <View style={styles.chartContainer}>
                <PieChart
                  data={chartData.pieChart}
                  width={screenWidth - 80}
                  height={220}
                  chartConfig={chartConfig}
                  accessor="population"
                  backgroundColor="transparent"
                  paddingLeft="15"
                  style={styles.chart}
                />
              </View>
            </GlassCard>
          </AnimatedCard>
        )}

        {/* Í∞êÏ†ï Ìä∏Î†åÎìú */}
        {emotionStats?.emotionTrends && emotionStats.emotionTrends.length > 0 && (
          <AnimatedCard delay={500}>
            <GlassCard style={styles.trendCard}>
              <Text style={styles.cardTitle}>üìä Í∞êÏ†ï ÏàúÏúÑ</Text>
              <Text style={styles.cardSubtitle}>Í∞ÄÏû• ÏûêÏ£º Í≤ΩÌóòÌïú Í∞êÏ†ïÎì§</Text>
              <View style={styles.trendList}>
                {emotionStats.emotionTrends.slice(0, 4).map((trend, index) => (
                  <EmotionTrendItem
                    key={trend.emotion}
                    emotion={trend.emotion}
                    count={trend.count}
                    percentage={trend.percentage}
                    isTop={index === 0}
                  />
                ))}
              </View>
            </GlassCard>
          </AnimatedCard>
        )}

        {/* Îπà ÏÉÅÌÉú */}
        {(!emotionStats || emotionStats.totalRecords === 0) && (
          <AnimatedCard delay={300}>
            <GlassCard style={styles.emptyCard}>
              <Text style={styles.emptyEmoji}>üìä</Text>
              <Text style={styles.emptyTitle}>ÏïÑÏßÅ Î∂ÑÏÑùÌï† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏñ¥Ïöî</Text>
              <Text style={styles.emptyText}>
                Inner TalkÏóêÏÑú AIÏôÄ ÎåÄÌôîÌïòÎ©∞{'\n'}Í∞êÏ†ïÏùÑ Í∏∞Î°ùÌï¥Î≥¥ÏÑ∏Ïöî!
              </Text>
              <TouchableOpacity 
                style={styles.emptyButton}
                onPress={() => navigation.navigate('InnerTalk')}
              >
                <LinearGradient
                  colors={APP_CONFIG.colors.gradients.primary}
                  style={styles.emptyButtonGradient}
                >
                  <Text style={styles.emptyButtonText}>Ï≤´ Í∏∞Î°ù ÎÇ®Í∏∞Í∏∞</Text>
                </LinearGradient>
              </TouchableOpacity>
            </GlassCard>
          </AnimatedCard>
        )}

        {/* AI Ïù∏ÏÇ¨Ïù¥Ìä∏ */}
        <AnimatedCard delay={600}>
          <GlassCard style={[styles.insightCard, { marginBottom: APP_CONFIG.spacing['8'] }]}>
            <LinearGradient
              colors={['rgba(236, 72, 153, 0.1)', 'rgba(99, 102, 241, 0.1)']}
              style={styles.insightGradient}
            />
            <View style={styles.insightHeader}>
              <Text style={styles.insightIcon}>üí°</Text>
              <Text style={styles.insightTitle}>AI Ïù∏ÏÇ¨Ïù¥Ìä∏</Text>
            </View>
            <Text style={styles.insightText}>
              {emotionStats && emotionStats.totalRecords > 0 ? (
                emotionStats.positiveRatio >= 60 
                  ? `Ï†ïÎßê Ï¢ãÏùÄ Í∞êÏ†ï ÏÉÅÌÉúÎ•º Ïú†ÏßÄÌïòÍ≥† Í≥ÑÏãúÎÑ§Ïöî! Í∏çÏ†ïÏ†ÅÏù∏ Í∞êÏ†ïÏù¥ ${emotionStats.positiveRatio}%Î•º Ï∞®ÏßÄÌïòÍ≥† ÏûàÏñ¥Ïöî.`
                  : 'Í∞êÏ†ïÏùÑ Í∏∞Î°ùÌïòÎäî ÏäµÍ¥ÄÏù¥ ÏûêÎ¶¨Ïû°Í≥† ÏûàÏñ¥Ïöî. Í≥ÑÏÜçÌï¥ÏÑú ÎßàÏùåÏùò Î≥ÄÌôîÎ•º Í¥ÄÏ∞∞Ìï¥Î≥¥ÏÑ∏Ïöî.'
              ) : (
                'Í∞êÏ†ïÏùÑ Í∏∞Î°ùÌïòÍ∏∞ ÏãúÏûëÌïòÎ©¥ ÎÜÄÎùºÏö¥ Ìå®ÌÑ¥Îì§ÏùÑ Î∞úÍ≤¨ÌïòÍ≤å Îê† Í±∞ÏòàÏöî!'
              )}
            </Text>
          </GlassCard>
        </AnimatedCard>
      </ScrollView>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: APP_CONFIG.colors.background,
  },
  
  loadingContainer: {
    justifyContent: 'center',
    alignItems: 'center',
  },
  
  loadingText: {
    fontSize: APP_CONFIG.fonts.sizes.base,
    color: APP_CONFIG.colors.textLight,
    marginTop: APP_CONFIG.spacing['4'],
  },
  
  headerGradient: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    height: 200,
    zIndex: -1,
  },
  
  scrollView: {
    flex: 1,
  },
  
  scrollContent: {
    paddingHorizontal: APP_CONFIG.spacing['4'],
    paddingBottom: APP_CONFIG.spacing['8'],
  },
  
  // Ìó§Îçî
  headerSection: {
    marginBottom: APP_CONFIG.spacing['6'],
  },
  
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: APP_CONFIG.spacing['6'],
  },
  
  headerIcon: {
    width: 64,
    height: 64,
    borderRadius: APP_CONFIG.borderRadius['2xl'],
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: APP_CONFIG.spacing['4'],
    ...APP_CONFIG.shadows.lg,
  },
  
  headerEmoji: {
    fontSize: 28,
  },
  
  headerContent: {
    flex: 1,
  },
  
  headerTitle: {
    fontSize: APP_CONFIG.fonts.sizes['3xl'],
    fontWeight: APP_CONFIG.fonts.weights.bold,
    color: APP_CONFIG.colors.text,
    marginBottom: APP_CONFIG.spacing['1'],
  },
  
  headerSubtitle: {
    fontSize: APP_CONFIG.fonts.sizes.base,
    color: APP_CONFIG.colors.textLight,
  },
  
  // Í∏ÄÎûòÏä§ Ïπ¥Îìú
  glassCard: {
    backgroundColor: 'rgba(255, 255, 255, 0.8)',
    borderRadius: APP_CONFIG.borderRadius['2xl'],
    padding: APP_CONFIG.spacing['6'],
    marginBottom: APP_CONFIG.spacing['4'],
    borderWidth: 1,
    borderColor: 'rgba(255, 255, 255, 0.2)',
    ...APP_CONFIG.shadows.lg,
    overflow: 'hidden',
  },
  
  cardTitle: {
    fontSize: APP_CONFIG.fonts.sizes.lg,
    fontWeight: APP_CONFIG.fonts.weights.semibold,
    color: APP_CONFIG.colors.text,
    marginBottom: APP_CONFIG.spacing['2'],
  },
  
  cardSubtitle: {
    fontSize: APP_CONFIG.fonts.sizes.sm,
    color: APP_CONFIG.colors.textLight,
    marginBottom: APP_CONFIG.spacing['4'],
  },
  
  // ÌÜµÍ≥Ñ Ïπ¥Îìú
  statsCard: {
    backgroundColor: 'rgba(255, 255, 255, 0.9)',
  },
  
  statsGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'space-between',
  },
  
  statItem: {
    width: '48%',
    alignItems: 'center',
    marginBottom: APP_CONFIG.spacing['4'],
  },
  
  statIconContainer: {
    width: 48,
    height: 48,
    borderRadius: 24,
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: APP_CONFIG.spacing['2'],
  },
  
  statIcon: {
    fontSize: 20,
  },
  
  statValue: {
    fontSize: APP_CONFIG.fonts.sizes.xl,
    fontWeight: APP_CONFIG.fonts.weights.bold,
    color: APP_CONFIG.colors.text,
    marginBottom: APP_CONFIG.spacing['1'],
  },
  
  statLabel: {
    fontSize: APP_CONFIG.fonts.sizes.sm,
    color: APP_CONFIG.colors.textLight,
    textAlign: 'center',
  },
  
  // Ï∞®Ìä∏ Ïπ¥Îìú
  chartCard: {
    backgroundColor: 'rgba(255, 255, 255, 0.9)',
  },
  
  chartContainer: {
    alignItems: 'center',
    overflow: 'hidden',
    borderRadius: APP_CONFIG.borderRadius.lg,
  },
  
  chart: {
    borderRadius: APP_CONFIG.borderRadius.lg,
  },
  
  // Ìä∏Î†åÎìú Ïπ¥Îìú
  trendCard: {
    backgroundColor: 'rgba(255, 255, 255, 0.9)',
  },
  
  trendList: {
    gap: APP_CONFIG.spacing['3'],
  },
  
  trendItem: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    backgroundColor: 'rgba(255, 255, 255, 0.7)',
    padding: APP_CONFIG.spacing['4'],
    borderRadius: APP_CONFIG.borderRadius.lg,
    position: 'relative',
  },
  
  topTrendItem: {
    backgroundColor: 'rgba(99, 102, 241, 0.1)',
    borderWidth: 2,
    borderColor: APP_CONFIG.colors.primary,
  },
  
  trendLeft: {
    flexDirection: 'row',
    alignItems: 'center',
    flex: 1,
  },
  
  trendEmoji: {
    fontSize: 24,
    marginRight: APP_CONFIG.spacing['3'],
  },
  
  trendInfo: {
    flex: 1,
  },
  
  trendEmotion: {
    fontSize: APP_CONFIG.fonts.sizes.base,
    fontWeight: APP_CONFIG.fonts.weights.semibold,
    marginBottom: APP_CONFIG.spacing['1'],
  },
  
  trendCount: {
    fontSize: APP_CONFIG.fonts.sizes.sm,
    color: APP_CONFIG.colors.textLight,
  },
  
  trendRight: {
    alignItems: 'flex-end',
    minWidth: 60,
  },
  
  trendPercentage: {
    fontSize: APP_CONFIG.fonts.sizes.lg,
    fontWeight: APP_CONFIG.fonts.weights.bold,
    marginBottom: APP_CONFIG.spacing['1'],
  },
  
  trendBar: {
    width: 50,
    height: 4,
    backgroundColor: APP_CONFIG.colors.border,
    borderRadius: 2,
    overflow: 'hidden',
  },
  
  trendBarFill: {
    height: '100%',
    borderRadius: 2,
  },
  
  topBadge: {
    position: 'absolute',
    top: -8,
    right: -8,
    backgroundColor: APP_CONFIG.colors.primary,
    paddingHorizontal: 8,
    paddingVertical: 2,
    borderRadius: 10,
  },
  
  topBadgeText: {
    fontSize: 10,
    fontWeight: 'bold',
    color: 'white',
  },
  
  // Îπà ÏÉÅÌÉú
  emptyCard: {
    alignItems: 'center',
    paddingVertical: APP_CONFIG.spacing['8'],
  },
  
  emptyEmoji: {
    fontSize: 64,
    marginBottom: APP_CONFIG.spacing['4'],
  },
  
  emptyTitle: {
    fontSize: APP_CONFIG.fonts.sizes.xl,
    fontWeight: APP_CONFIG.fonts.weights.semibold,
    color: APP_CONFIG.colors.text,
    marginBottom: APP_CONFIG.spacing['2'],
    textAlign: 'center',
  },
  
  emptyText: {
    fontSize: APP_CONFIG.fonts.sizes.base,
    color: APP_CONFIG.colors.textLight,
    textAlign: 'center',
    lineHeight: 24,
    marginBottom: APP_CONFIG.spacing['6'],
  },
  
  emptyButton: {
    borderRadius: APP_CONFIG.borderRadius.xl,
    overflow: 'hidden',
    ...APP_CONFIG.shadows.md,
  },
  
  emptyButtonGradient: {
    paddingVertical: APP_CONFIG.spacing['3'],
    paddingHorizontal: APP_CONFIG.spacing['6'],
    alignItems: 'center',
  },
  
  emptyButtonText: {
    fontSize: APP_CONFIG.fonts.sizes.base,
    fontWeight: APP_CONFIG.fonts.weights.medium,
    color: APP_CONFIG.colors.textInverse,
  },
  
  // Ïù∏ÏÇ¨Ïù¥Ìä∏ Ïπ¥Îìú
  insightCard: {
    backgroundColor: 'rgba(255, 255, 255, 0.8)',
    position: 'relative',
  },
  
  insightGradient: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    borderRadius: APP_CONFIG.borderRadius['2xl'],
  },
  
  insightHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: APP_CONFIG.spacing['3'],
  },
  
  insightIcon: {
    fontSize: 24,
    marginRight: APP_CONFIG.spacing['2'],
  },
  
  insightTitle: {
    fontSize: APP_CONFIG.fonts.sizes.lg,
    fontWeight: APP_CONFIG.fonts.weights.semibold,
    color: APP_CONFIG.colors.text,
  },
  
  insightText: {
    fontSize: APP_CONFIG.fonts.sizes.base,
    color: APP_CONFIG.colors.textLight,
    lineHeight: 24,
    textAlign: 'center',
  },
});

export default InsightsScreen;